- name: test without configlet prefix
  register: CVP_VARS
  inventory_to_container:
        inventory: '{{ role_path }}/{{ inventory_path }}/inventory.yml'
        container_root: 'DC1_FABRIC'
        configlet_dir: '{{ role_path }}/{{ inventory_path }}/intended/configs'
        device_filter: ['DC1-LE']
        destination: "{{ actual_output }}"
- local_action: shell diff "{{ expected_output }}/expected_with_all_param.yml" "{{ actual_output }}"
  failed_when: "diff_output.rc > 1"
  register: diff_output

- assert:
        that:
           - CVP_VARS is success
           - CVP_VARS.CVP_TOPOLOGY != {}
           - CVP_VARS.CVP_CONFIGLETS != {}
           - CVP_VARS.changed == false
           - diff_output.stdout == ""
